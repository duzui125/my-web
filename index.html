<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ„</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: radial-gradient(1200px 700px at 50% 20%, #0e1b35 0%, #08101f 55%, #050a14 100%);
      overflow: hidden;
      font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
    }

    /* è®©ç”»é¢å±…ä¸­ */
    .scene {
      position: relative;
      width: 100%;
      height: 100%;
      display: grid;
      place-items: center;
    }

    /* åœ£è¯æ ‘å®¹å™¨ */
    .tree {
      position: relative;
      width: min(40vmin, 340px);
      height: min(52vmin, 440px);
      transform: translateY(-2vmin);
    }

    /* æ˜Ÿæ˜Ÿ */
    .star {
      position: absolute;
      left: 50%;
      top: 2%;
      transform: translateX(-50%);
      width: 46px;
      height: 46px;
      filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.35));
      animation: starTwinkle 1.4s ease-in-out infinite alternate;
    }
    @keyframes starTwinkle {
      from { transform: translateX(-50%) scale(0.95); opacity: 0.75; }
      to   { transform: translateX(-50%) scale(1.10); opacity: 1; }
    }

    /* æ ‘å¶ä¸‰å±‚ï¼ˆç”¨ CSS ä¸‰è§’å½¢ï¼‰ */
    .layer {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 18vmin solid transparent;
      border-right: 18vmin solid transparent;
      border-bottom: 12vmin solid #108b4c;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,0.25));
    }

    .layer.l1 { top: 18%; border-left-width: 18vmin; border-right-width: 18vmin; border-bottom-width: 12vmin; }
    .layer.l2 { top: 30%; border-left-width: 14vmin; border-right-width: 14vmin; border-bottom-width: 10vmin; }
    .layer.l3 { top: 40%; border-left-width: 10vmin; border-right-width: 10vmin; border-bottom-width: 8vmin; }

    /* åšå‡ºä½ å›¾é‡Œé‚£ç§â€œä¸­é—´å‡¹ä¸€å£â€çš„æ ‘å½¢ï¼šåŠ ä¸€å±‚å°ç¼ºå£ */
    .notch {
      position: absolute;
      left: 50%;
      top: 35%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 6.5vmin solid transparent;
      border-right: 6.5vmin solid transparent;
      border-bottom: 4.2vmin solid rgba(5,10,20,0.95); /* ç”¨èƒŒæ™¯è‰²æŒ–ç©º */
    }

    /* æ ‘å¹² */
    .trunk {
      position: absolute;
      left: 50%;
      bottom: 8%;
      transform: translateX(-50%);
      width: 7.5vmin;
      max-width: 58px;
      height: 11vmin;
      max-height: 90px;
      background: #7a4b14;
      border-radius: 8px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.25);
    }

    /* é›ªèŠ±å±‚ï¼ˆCanvas å…¨å±ï¼‰ */
    canvas#snow {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    /* å°æç¤ºï¼ˆå¯åˆ ï¼‰ */
    .hint {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      font-size: 12px;
      opacity: 0.55;
      color: #cfe2ff;
      user-select: none;
      letter-spacing: 0.3px;
    }
  </style>
</head>

<body>
  <canvas id="snow"></canvas>

  <div class="scene">
    <div class="tree" aria-label="Christmas Tree">
      <!-- æ˜Ÿæ˜Ÿï¼ˆSVGï¼Œç¨³ã€æ¸…æ™°ï¼‰ -->
      <svg class="star" viewBox="0 0 100 100" aria-hidden="true">
        <polygon
          points="50,6 61,38 95,38 67,57 78,90 50,71 22,90 33,57 5,38 39,38"
          fill="#f6c500" />
      </svg>

      <!-- æ ‘å¶ -->
      <div class="layer l1"></div>
      <div class="layer l2"></div>
      <div class="layer l3"></div>

      <!-- ä¸­é—´æŒ–ç©ºç¼ºå£ -->
      <div class="notch"></div>

      <!-- æ ‘å¹² -->
      <div class="trunk"></div>
    </div>
  </div>

  <div class="hint">æ‰“å¼€ç½‘å€å°±èƒ½çœ‹åˆ°ï¼šåœ£è¯æ ‘ + ä¸‹é›ªåŠ¨ç”»</div>

  <script>
    // ===== é›ªèŠ±åŠ¨ç”»ï¼ˆCanvasï¼‰=====
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");

    function resize() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener("resize", resize);
    resize();

    const FLAKES = [];
    const COUNT = Math.min(140, Math.floor((window.innerWidth * window.innerHeight) / 12000) + 60);

    function rand(min, max) { return Math.random() * (max - min) + min; }

    function makeFlake() {
      return {
        x: rand(0, window.innerWidth),
        y: rand(-window.innerHeight, 0),
        r: rand(1.2, 3.6),
        vy: rand(0.6, 1.8),
        vx: rand(-0.35, 0.35),
        drift: rand(0.002, 0.010),
        phase: rand(0, Math.PI * 2),
        opacity: rand(0.45, 0.95),
        // è®©ä¸€éƒ¨åˆ†é›ªèŠ±åƒâ€œå…­ç“£é›ªèŠ±â€ä¸€æ ·ï¼ˆç±»ä¼¼ä½ å›¾é‡Œé‚£ç§å°èŠ±ï¼‰
        fancy: Math.random() < 0.35
      };
    }

    for (let i = 0; i < COUNT; i++) FLAKES.push(makeFlake());

    function drawFancySnowflake(x, y, r, alpha) {
      ctx.save();
      ctx.globalAlpha = alpha;
      ctx.translate(x, y);
      ctx.lineWidth = Math.max(1, r * 0.45);
      ctx.strokeStyle = "rgba(255,255,255,0.95)";
      for (let k = 0; k < 6; k++) {
        ctx.rotate(Math.PI / 3);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(0, -r * 2.2);
        ctx.stroke();

        // å°åˆ†å‰
        ctx.beginPath();
        ctx.moveTo(0, -r * 1.4);
        ctx.lineTo(r * 0.7, -r * 1.8);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(0, -r * 1.4);
        ctx.lineTo(-r * 0.7, -r * 1.8);
        ctx.stroke();
      }
      ctx.restore();
    }

    function drawDot(x, y, r, alpha) {
      ctx.save();
      ctx.globalAlpha = alpha;
      ctx.fillStyle = "rgba(255,255,255,0.92)";
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }

    function step() {
      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      for (const f of FLAKES) {
        f.phase += f.drift * 60;
        f.x += f.vx + Math.sin(f.phase) * 0.35;
        f.y += f.vy;

        // é‡ç”Ÿ
        if (f.y > window.innerHeight + 10) {
          f.y = rand(-80, -10);
          f.x = rand(0, window.innerWidth);
        }
        if (f.x < -20) f.x = window.innerWidth + 20;
        if (f.x > window.innerWidth + 20) f.x = -20;

        if (f.fancy) drawFancySnowflake(f.x, f.y, f.r, f.opacity);
        else drawDot(f.x, f.y, f.r, f.opacity);
      }

      requestAnimationFrame(step);
    }
    step();
  </script>
</body>
</html>
