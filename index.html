<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ„ Tree & Clock</title>
  <style>
    :root{
      --bg1:#0e203a; --bg2:#081427; --bg3:#040916;
      --green:#0f8a4a; --green2:#0b6f3c;
      --gold:#f7c400; --trunk:#7a4b14;
      --ui: rgba(255,255,255,.10);
      --ui2: rgba(255,255,255,.18);
      --txt: rgba(230,242,255,.92);
      --glass: rgba(255,255,255,.06);
    }

    html,body{
      margin:0; height:100%; overflow:hidden;
      background: radial-gradient(1200px 700px at 50% 22%, var(--bg1) 0%, var(--bg2) 55%, var(--bg3) 100%);
      font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
      color: var(--txt);
    }

    canvas#snow{
      position:fixed; inset:0;
      width:100%; height:100%;
      pointer-events:none;
    }

    /* å·¦æ ‘å³é’Ÿå¸ƒå±€ */
    .layout{
      position:relative;
      height:100%;
      display:grid;
      grid-template-columns: 1fr 1fr;
      align-items:center;
      padding: clamp(14px, 3vw, 34px);
      gap: clamp(12px, 2.2vw, 28px);
    }

    /* ä¸¤ä¾§å¡ç‰‡å®¹å™¨ï¼ˆé€æ˜ç»ç’ƒæ„Ÿï¼‰ */
    .panel{
      height: min(78vh, 820px);
      border-radius: 22px;
      background: var(--glass);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      overflow:hidden;
      position:relative;
      display:grid;
      place-items:center;
    }

    .title{
      position:absolute;
      top:14px; left:16px;
      font-size:13px;
      letter-spacing:.5px;
      opacity:.82;
      background: rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.12);
      padding:8px 10px;
      border-radius: 14px;
      user-select:none;
    }

    /* ========== å·¦ä¾§ï¼š3D åœ£è¯æ ‘ ========== */
    .treeWrap{
      width: 100%;
      height: 100%;
      display:grid;
      place-items:center;
      perspective: 1100px;
    }

    .tree3d{
      position:relative;
      width: min(34vmin, 380px);
      height: min(56vmin, 560px);
      transform-style: preserve-3d;
      animation: spin 10s linear infinite;
    }
    @keyframes spin { to { transform: rotateY(360deg); } }

    /* æ˜Ÿæ˜Ÿï¼šä¸è·Ÿæ ‘è½¬ï¼ˆæ”¾å¤–é¢ï¼‰ */
    .star{
      position:absolute;
      top: 12%;
      left: 50%;
      transform: translateX(-50%);
      width: 56px;
      height: 56px;
      filter: drop-shadow(0 0 14px rgba(255,215,0,.28));
      animation: tw 1.7s ease-in-out infinite alternate;
      pointer-events:none;
      z-index: 5;
    }
    @keyframes tw { from{opacity:.82; transform:translateX(-50%) scale(.98);} to{opacity:1; transform:translateX(-50%) scale(1.08);} }

    /* æ ‘å¹²ï¼ˆç®€å•æŸ±ä½“æ„Ÿï¼‰ */
    .trunk{
      position:absolute;
      bottom: 10%;
      left:50%;
      width: 78px;
      height: 120px;
      transform: translateX(-50%) translateZ(0);
      transform-style: preserve-3d;
    }
    .trunk .face{
      position:absolute; inset:0;
      background: var(--trunk);
      border-radius: 18px;
      box-shadow: 0 16px 30px rgba(0,0,0,.25);
      opacity:.98;
    }
    .trunk .side{
      position:absolute;
      inset:0;
      background: rgba(122,75,20,.85);
      border-radius: 18px;
      transform: rotateY(90deg) translateZ(39px);
    }

    /* åœ†é”¥æ ‘ï¼šç”¨å¤šç‰‡â€œå¶ç‰‡é¢â€å›´æˆ */
    .cone{
      position:absolute;
      left:50%;
      top: 18%;
      width: 100%;
      height: 62%;
      transform: translateX(-50%);
      transform-style: preserve-3d;
    }

    .leaf{
      position:absolute;
      left:50%;
      top: 0;
      width: 280px;
      height: 360px;
      transform-style: preserve-3d;
      transform-origin: 50% 100%;
      translate: -50% 0;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.28));
    }

    /* å•ç‰‡å¶å­ï¼ˆæ›´æ¢äº†æ¬¾å¼ï¼šæ›´â€œåœ†é”¥â€ï¼‰ */
    .leaf svg{ width:100%; height:100%; display:block; }
    .leaf .glow{
      filter: drop-shadow(0 0 14px rgba(16,139,76,.18));
    }

    /* å½©ç¯ */
    .bulb{
      position:absolute;
      width: 10px; height: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,.9);
      box-shadow: 0 0 14px rgba(255,255,255,.45);
      animation: blink 1.6s ease-in-out infinite alternate;
    }
    .bulb.b1{ background:#ff6b6b; box-shadow:0 0 14px rgba(255,107,107,.55); }
    .bulb.b2{ background:#ffd93d; box-shadow:0 0 14px rgba(255,217,61,.55); }
    .bulb.b3{ background:#6bcBff; box-shadow:0 0 14px rgba(107,203,255,.55); }
    .bulb.b4{ background:#a3ff6b; box-shadow:0 0 14px rgba(163,255,107,.55); }
    @keyframes blink{ from{opacity:.55; transform:scale(.9);} to{opacity:1; transform:scale(1.15);} }

    /* ========== å³ä¾§ï¼šæŒ‡é’ˆæ—¶é’Ÿ ========== */
    .clockWrap{
      width: 100%;
      height: 100%;
      display:grid;
      place-items:center;
      padding: 22px;
    }

    .clockCard{
      width: min(52vmin, 520px);
      aspect-ratio: 1 / 1;
      border-radius: 999px;
      background: radial-gradient(circle at 35% 30%, rgba(255,255,255,.16), rgba(255,255,255,.06) 45%, rgba(255,255,255,.04) 100%);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 22px 70px rgba(0,0,0,.35);
      position:relative;
      display:grid;
      place-items:center;
      overflow:hidden;
    }

    /* åˆ»åº¦ */
    .ticks{
      position:absolute; inset: 10%;
      border-radius:999px;
    }
    .tick{
      position:absolute;
      left:50%; top:50%;
      width: 2px; height: 12px;
      background: rgba(230,242,255,.55);
      transform-origin: 50% calc(100% + 130px);
      border-radius: 2px;
    }
    .tick.big{
      height: 18px;
      width: 3px;
      background: rgba(230,242,255,.78);
    }

    /* æ•°å­— 12/3/6/9 */
    .num{
      position:absolute;
      font-variant-numeric: tabular-nums;
      font-weight: 600;
      color: rgba(230,242,255,.82);
      text-shadow: 0 8px 30px rgba(0,0,0,.35);
      user-select:none;
    }

    /* æŒ‡é’ˆ */
    .hand{
      position:absolute;
      left:50%; top:50%;
      transform-origin: 50% 100%;
      border-radius: 999px;
      box-shadow: 0 10px 26px rgba(0,0,0,.28);
    }
    .hand.hour{
      width: 10px;
      height: 26%;
      background: rgba(230,242,255,.88);
      transform: translate(-50%, -100%) rotate(0deg);
    }
    .hand.min{
      width: 7px;
      height: 36%;
      background: rgba(230,242,255,.82);
      transform: translate(-50%, -100%) rotate(0deg);
    }
    .hand.sec{
      width: 3px;
      height: 40%;
      background: rgba(255,107,107,.92);
      transform: translate(-50%, -100%) rotate(0deg);
      box-shadow: 0 0 18px rgba(255,107,107,.45);
    }

    .center{
      position:absolute;
      left:50%; top:50%;
      width: 16px; height: 16px;
      border-radius: 999px;
      background: rgba(255,255,255,.92);
      transform: translate(-50%,-50%);
      box-shadow: 0 0 20px rgba(255,255,255,.25);
      border: 1px solid rgba(255,255,255,.18);
    }
    .center::after{
      content:"";
      position:absolute; inset:4px;
      border-radius:999px;
      background: rgba(255,107,107,.9);
    }

    .digital{
      position:absolute;
      bottom: 10%;
      left:50%;
      transform:translateX(-50%);
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      font-variant-numeric: tabular-nums;
      letter-spacing:.7px;
      font-size: 14px;
      user-select:none;
    }

    /* å“åº”å¼ï¼šçª„å±ä¸Šä¸‹å¸ƒå±€ */
    @media (max-width: 860px){
      .layout{ grid-template-columns: 1fr; }
      .panel{ height: min(44vh, 520px); }
      .star{ top: 8%; }
      .clockCard{ width: min(72vmin, 520px); }
    }
  </style>
</head>

<body>
  <canvas id="snow"></canvas>

  <div class="layout">
    <!-- å·¦ï¼šåœ£è¯æ ‘ -->
    <section class="panel">
      <div class="title">ğŸ„ Rotating Tree</div>

      <!-- æ˜Ÿæ˜Ÿ -->
      <svg class="star" viewBox="0 0 100 100" aria-hidden="true">
        <polygon
          points="50,6 61,38 95,38 67,57 78,90 50,71 22,90 33,57 5,38 39,38"
          fill="var(--gold)" />
      </svg>

      <div class="treeWrap">
        <div class="tree3d">
          <div class="cone" id="cone">
            <!-- å¶ç‰‡é¢ï¼šJS ä¼šç”Ÿæˆå¤šç‰‡å›´ä¸€åœˆ -->
          </div>

          <div class="trunk">
            <div class="face"></div>
            <div class="side"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- å³ï¼šæŒ‡é’ˆæ—¶é’Ÿ -->
    <section class="panel">
      <div class="title">ğŸ•’ Analog Clock</div>

      <div class="clockWrap">
        <div class="clockCard" aria-label="Analog Clock">
          <div class="ticks" id="ticks"></div>

          <div class="num" style="top:6%; left:50%; transform:translateX(-50%);">12</div>
          <div class="num" style="top:50%; right:6%; transform:translateY(-50%);">3</div>
          <div class="num" style="bottom:6%; left:50%; transform:translateX(-50%);">6</div>
          <div class="num" style="top:50%; left:6%; transform:translateY(-50%);">9</div>

          <div class="hand hour" id="h"></div>
          <div class="hand min" id="m"></div>
          <div class="hand sec" id="s"></div>
          <div class="center"></div>

          <div class="digital" id="digital">--:--:--</div>
        </div>
      </div>
    </section>
  </div>

  <script>
    // ====== ç”Ÿæˆâ€œåœ†é”¥æ ‘â€çš„å¤šå¶ç‰‡ï¼ˆæ›´æ¢æ¬¾å¼ï¼‰======
    const cone = document.getElementById('cone');

    // å¶ç‰‡ SVGï¼šåœ†é”¥æ„Ÿï¼ˆä¸Šå°–ä¸‹å®½ï¼‰ï¼Œä¸­é—´åŠ ä¸€ç‚¹æš—éƒ¨
    function leafSVG(shade=1){
      // shade 0.85~1
      const g1 = `rgba(16,139,76,${0.95*shade})`;
      const g2 = `rgba(12,111,60,${0.95*shade})`;
      const dark = `rgba(0,0,0,${0.10*(1.1-shade)})`;

      return `
        <svg viewBox="0 0 300 420" class="glow" aria-hidden="true">
          <!-- ä¸»ä½“ -->
          <path d="M150 20
                   C 105 95, 50 140, 40 210
                   C 30 285, 85 345, 150 400
                   C 215 345, 270 285, 260 210
                   C 250 140, 195 95, 150 20 Z"
                fill="${g1}"/>
          <!-- å å±‚ï¼ˆåƒæ¾é’ˆå±‚æ¬¡ï¼‰ -->
          <path d="M150 95
                   C 115 145, 80 170, 72 215
                   C 64 260, 98 300, 150 335
                   C 202 300, 236 260, 228 215
                   C 220 170, 185 145, 150 95 Z"
                fill="${g2}" opacity="0.95"/>
          <!-- è½»å¾®é˜´å½± -->
          <path d="M150 30
                   C 130 80, 118 110, 118 155
                   C 118 235, 130 295, 150 400
                   C 170 295, 182 235, 182 155
                   C 182 110, 170 80, 150 30 Z"
                fill="${dark}"/>
        </svg>
      `;
    }

    // åˆ›å»º N ç‰‡å›´ä¸€åœˆï¼Œå½¢æˆâ€œåœ†é”¥ä½“â€æ„Ÿè§‰
    const N = 14;
    for(let i=0;i<N;i++){
      const div = document.createElement('div');
      div.className = 'leaf';
      const shade = 1 - (i%4)*0.05; // è½»å¾®æ˜æš—å˜åŒ–
      div.innerHTML = leafSVG(shade);

      const angle = (360/N) * i;
      const z = 90;            // æ ‘çš„åšåº¦
      const tilt = 12;         // å¶ç‰‡å¾®å€¾æ–œ
      div.style.transform = `translate(-50%, 0) rotateY(${angle}deg) translateZ(${z}px) rotateX(${tilt}deg)`;
      div.style.top = '0';
      cone.appendChild(div);
    }

    // å½©ç¯ï¼šæŒ‚åœ¨æ ‘ä¸Šï¼ˆéšæœºä½ç½®ï¼‰
    function addBulbs(count){
      for(let i=0;i<count;i++){
        const b = document.createElement('div');
        const cls = ['b1','b2','b3','b4'][Math.floor(Math.random()*4)];
        b.className = `bulb ${cls}`;

        // æ ‘èŒƒå›´ï¼ˆç›¸å¯¹ tree3dï¼‰
        // x: 20%~80%  y: 18%~65%
        const x = 20 + Math.random()*60;
        const y = 18 + Math.random()*47;

        b.style.left = x + '%';
        b.style.top  = y + '%';
        b.style.animationDuration = (1.0 + Math.random()*1.8) + 's';
        b.style.animationDelay = (Math.random()*1.5) + 's';

        // è®©ç¯ä¹Ÿæœ‰ç‚¹ 3Dï¼šéšæœºè½¬åˆ°ä¸åŒ Z
        const z = (Math.random()*120 - 60).toFixed(1);
        b.style.transform = `translate(-50%, -50%) translateZ(${z}px)`;

        // ç¯æŒ‚åœ¨ cone ä¸Šï¼ˆè·Ÿç€æ—‹è½¬ï¼‰
        cone.appendChild(b);
      }
    }
    addBulbs(28);

    // ====== æŒ‡é’ˆæ—¶é’Ÿï¼šåˆ»åº¦ç”Ÿæˆ ======
    const ticks = document.getElementById('ticks');
    for(let i=0;i<60;i++){
      const t = document.createElement('div');
      t.className = 'tick' + (i%5===0 ? ' big' : '');
      // è®©åˆ»åº¦ç»•åœ†åˆ†å¸ƒï¼šrotate(i*6deg) ç„¶åå¾€å¤–æ¨
      t.style.transform = `translate(-50%,-50%) rotate(${i*6}deg) translateY(-180px)`;
      // å°å±æ—¶åˆ»åº¦è·ç¦»éœ€è¦è‡ªåŠ¨é€‚é…ï¼šæˆ‘ä»¬ç”¨ CSS transform-origin å›ºå®šä¸å¤ªå‡†
      // æ‰€ä»¥è¿™é‡Œç”¨ translateYï¼Œå¹¶é è§†è§‰èŒƒå›´ï¼ˆè¶³å¤Ÿå¥½çœ‹ï¼‰
      ticks.appendChild(t);
    }

    // ====== æŒ‡é’ˆæ—¶é’Ÿï¼šèµ°æ—¶ ======
    const H = document.getElementById('h');
    const M = document.getElementById('m');
    const S = document.getElementById('s');
    const digital = document.getElementById('digital');

    function pad(n){ return String(n).padStart(2,'0'); }

    function tickClock(){
      const now = new Date();
      const ms = now.getMilliseconds();
      const sec = now.getSeconds() + ms/1000;
      const min = now.getMinutes() + sec/60;
      const hr  = (now.getHours()%12) + min/60;

      const secDeg = sec * 6;     // 360/60
      const minDeg = min * 6;
      const hrDeg  = hr  * 30;    // 360/12

      H.style.transform = `translate(-50%, -100%) rotate(${hrDeg}deg)`;
      M.style.transform = `translate(-50%, -100%) rotate(${minDeg}deg)`;
      S.style.transform = `translate(-50%, -100%) rotate(${secDeg}deg)`;

      digital.textContent = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
      requestAnimationFrame(tickClock);
    }
    tickClock();

    // ====== é›ªèŠ±ï¼šä¸Šå¯†ä¸‹ç¨€ + ç‚¹çŠ¶/é›ªèŠ±çŠ¶æ··åˆ ======
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");

    function resize(){
      const dpr = Math.max(1, devicePixelRatio || 1);
      canvas.width = Math.floor(innerWidth * dpr);
      canvas.height = Math.floor(innerHeight * dpr);
      canvas.style.width = innerWidth + "px";
      canvas.style.height = innerHeight + "px";
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    addEventListener("resize", resize);
    resize();

    const rand=(a,b)=>Math.random()*(b-a)+a;
    const flakes=[];
    const COUNT = Math.min(150, Math.floor((innerWidth*innerHeight)/16000)+65);

    function spawn(initial=false){
      const bias = Math.pow(Math.random(), 2.2); // è¶Šé ä¸Šè¶Šå¤š
      const y = initial ? (bias * innerHeight * 0.78) : rand(-90,-10);
      return {
        x: rand(0, innerWidth),
        y,
        r: rand(1.1, 3.3),
        vy: rand(0.35, 1.15),
        vx: rand(-0.15, 0.15),
        sway: rand(0.002, 0.010),
        phase: rand(0, Math.PI*2),
        a: rand(0.40, 0.92),
        fancy: Math.random()<0.28
      };
    }
    for(let i=0;i<COUNT;i++) flakes.push(spawn(true));

    function drawFancy(x,y,r,a){
      ctx.save();
      ctx.globalAlpha = a;
      ctx.translate(x,y);
      ctx.lineWidth = Math.max(1, r*0.42);
      ctx.strokeStyle = "rgba(255,255,255,0.95)";
      for(let k=0;k<6;k++){
        ctx.rotate(Math.PI/3);
        ctx.beginPath(); ctx.moveTo(0,0); ctx.lineTo(0,-r*2.1); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,-r*1.25); ctx.lineTo(r*0.65,-r*1.6); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,-r*1.25); ctx.lineTo(-r*0.65,-r*1.6); ctx.stroke();
      }
      ctx.restore();
    }
    function drawDot(x,y,r,a){
      ctx.save();
      ctx.globalAlpha = a;
      ctx.fillStyle = "rgba(255,255,255,0.92)";
      ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
      ctx.restore();
    }

    function loop(){
      ctx.clearRect(0,0,innerWidth,innerHeight);
      for(const f of flakes){
        f.phase += f.sway*60;
        f.x += f.vx + Math.sin(f.phase)*0.25;
        f.y += f.vy;

        if (f.y > innerHeight*0.70 && Math.random()<0.015){
          Object.assign(f, spawn(false));
          continue;
        }
        if (f.y > innerHeight + 12) Object.assign(f, spawn(false));
        if (f.x < -20) f.x = innerWidth + 20;
        if (f.x > innerWidth + 20) f.x = -20;

        if (f.fancy) drawFancy(f.x,f.y,f.r,f.a);
        else drawDot(f.x,f.y,f.r,f.a);
      }
      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
