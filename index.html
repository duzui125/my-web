<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ„ Christmas Scene</title>
  <style>
    :root{
      --bg1:#0e203a; --bg2:#081427; --bg3:#040916;
      --green:#0f8a4a; --green2:#0c7a41;
      --gold:#f7c400; --trunk:#7a4b14;
      --ui: rgba(255,255,255,.10);
      --ui2: rgba(255,255,255,.18);
      --txt: rgba(230,242,255,.92);
    }

    html,body{
      margin:0; height:100%; overflow:hidden;
      background: radial-gradient(1200px 700px at 50% 22%, var(--bg1) 0%, var(--bg2) 55%, var(--bg3) 100%);
      font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
    }

    /* é›ªèŠ±ç”»å¸ƒ */
    canvas#snow{
      position:fixed; inset:0;
      width:100%; height:100%;
      pointer-events:none;
    }

    /* é¡¶éƒ¨ UIï¼šæ—¶é’Ÿ */
    .hud{
      position:fixed;
      top:16px; right:16px;
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:14px;
      background: var(--ui);
      border:1px solid var(--ui2);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      color: var(--txt);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      user-select:none;
    }
    .clock{
      font-variant-numeric: tabular-nums;
      letter-spacing:.6px;
      font-size:14px;
      line-height:1;
    }
    .date{
      opacity:.78;
      font-size:12px;
      line-height:1;
      margin-top:4px;
    }
    .hud .dot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(255,255,255,.65);
      box-shadow: 0 0 10px rgba(255,255,255,.35);
      opacity:.75;
      animation: pulse 1.6s ease-in-out infinite alternate;
    }
    @keyframes pulse { from{transform:scale(.9);opacity:.6;} to{transform:scale(1.15);opacity:1;} }

    /* åœºæ™¯å±…ä¸­ */
    .stage{
      position:relative;
      width:100%; height:100%;
      display:grid;
      place-items:center;
      transform: translateY(16px);
    }

    /* 3D å®¹å™¨ */
    .scene3d{
      perspective: 1000px;
      width: min(70vmin, 980px);
      height: min(52vmin, 740px);
      display:grid;
      place-items:center;
    }

    /* æ—‹è½¬ç»„ */
    .spin{
      position:relative;
      width: min(58vmin, 760px);
      height: min(44vmin, 580px);
      transform-style: preserve-3d;
      animation: spin 10s linear infinite;
    }
    @keyframes spin { to { transform: rotateY(360deg); } }

    /* æ ‘æ•´ä½“ï¼ˆæˆ‘ä»¬ç”¨å¤šä¸ªâ€œé¢â€å›´æˆä¸€ä¸ª 3D æ ‘ï¼‰ */
    .tree3d{
      position:absolute; inset:0;
      transform-style: preserve-3d;
      display:grid;
      place-items:center;
    }

    /* æ˜Ÿæ˜Ÿï¼šä¸è·Ÿæ ‘ä¸€èµ·è½¬ï¼ˆæ›´å¥½çœ‹ï¼‰ï¼Œè½»å¾®é—ªçƒ */
    .star{
      position:absolute;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
      width: 54px;
      height: 54px;
      filter: drop-shadow(0 0 12px rgba(255,215,0,.28));
      animation: tw 1.7s ease-in-out infinite alternate;
      z-index: 5;
    }
    @keyframes tw { from{opacity:.82; transform:translateX(-50%) scale(.98);} to{opacity:1; transform:translateX(-50%) scale(1.08);} }

    /* æ ‘å¹²ï¼ˆè·Ÿæ ‘ä¸€èµ·è½¬ï¼Œåšæˆ 3D æŸ±ä½“çš„æ„Ÿè§‰ï¼šç”¨ä¸¤ä¸ªé¢ï¼‰ */
    .trunkWrap{
      position:absolute;
      bottom: 6%;
      left:50%;
      width: 90px;
      height: 150px;
      transform-style: preserve-3d;
      transform: translateX(-50%) translateZ(0px);
    }
    .trunkFace{
      position:absolute; inset:0;
      border-radius: 18px;
      background: var(--trunk);
      box-shadow: 0 16px 30px rgba(0,0,0,.25);
      opacity: .98;
    }
    .trunkFace.back{
      transform: rotateY(90deg) translateZ(45px);
      width: 90px;
    }

    /* æ ‘çš„æ¯ä¸€ä¸ªâ€œé¢â€ */
    .face{
      position:absolute;
      left:50%; top:50%;
      transform-style: preserve-3d;
      transform-origin: center;
      width: 520px;
      height: 360px;
      translate: -50% -52%;
      display:grid;
      place-items:center;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.28));
    }

    /* ç”¨ SVG ç”»å‡ºä½ é‚£ç§ä¸‰å±‚å¸½æª + ä¸­é—´é•‚ç©º */
    .face svg{
      width: 100%;
      height: 100%;
    }

    /* è®©ä¸åŒé¢æœ‰ä¸€ç‚¹ç‚¹æ˜æš—å·®ï¼Œå¢å¼º 3D */
    .shade1{ opacity: 1; }
    .shade2{ opacity: .92; }
    .shade3{ opacity: .86; }
    .shade4{ opacity: .80; }

    /* åº•éƒ¨å°æ ‡é¢˜ï¼ˆå¯åˆ ï¼‰ */
    .caption{
      position:fixed;
      left:50%;
      bottom:14px;
      transform:translateX(-50%);
      padding:8px 12px;
      border-radius:14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(230,242,255,.75);
      font-size:12px;
      user-select:none;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    /* å°å±å¹•é€‚é…ï¼šæ ‘å†å°ä¸€ç‚¹ */
    @media (max-width: 520px){
      .face{ width: 380px; height: 280px; }
      .trunkWrap{ width: 70px; height: 120px; }
      .star{ width: 46px; height: 46px; }
    }
  </style>
</head>

<body>
  <canvas id="snow"></canvas>

  <!-- æ—¶é’Ÿ -->
  <div class="hud" aria-label="Clock">
    <div class="dot" aria-hidden="true"></div>
    <div>
      <div class="clock" id="clock">--:--:--</div>
      <div class="date" id="date">----</div>
    </div>
  </div>

  <div class="stage">
    <div class="scene3d">
      <!-- æ˜Ÿæ˜Ÿï¼ˆå•ç‹¬æ”¾ï¼Œä¸è·Ÿæ ‘è½¬ï¼‰ -->
      <svg class="star" viewBox="0 0 100 100" aria-hidden="true">
        <polygon
          points="50,6 61,38 95,38 67,57 78,90 50,71 22,90 33,57 5,38 39,38"
          fill="var(--gold)"/>
      </svg>

      <!-- æ—‹è½¬ç»„ -->
      <div class="spin" aria-label="Rotating Christmas Tree">
        <div class="tree3d">
          <!-- 4 ä¸ªé¢å›´æˆä¸€ä¸ªâ€œé”¥ä½“æ„Ÿâ€çš„æ ‘ -->
          <div class="face shade1" style="transform: translate(-50%,-52%) rotateY(0deg) translateZ(140px);">
            <svg viewBox="0 0 1600 900">
              <polygon points="800,250 540,450 1060,450" fill="var(--green)"/>
              <polygon points="800,410 610,560 990,560" fill="var(--green)"/>
              <polygon points="800,555 680,650 920,650" fill="var(--green2)"/>
              <polygon points="800,450 710,520 890,520" fill="#070f1f" opacity="0.98"/>
            </svg>
          </div>

          <div class="face shade2" style="transform: translate(-50%,-52%) rotateY(90deg) translateZ(140px);">
            <svg viewBox="0 0 1600 900">
              <polygon points="800,250 540,450 1060,450" fill="var(--green)"/>
              <polygon points="800,410 610,560 990,560" fill="var(--green)"/>
              <polygon points="800,555 680,650 920,650" fill="var(--green2)"/>
              <polygon points="800,450 710,520 890,520" fill="#070f1f" opacity="0.98"/>
            </svg>
          </div>

          <div class="face shade3" style="transform: translate(-50%,-52%) rotateY(180deg) translateZ(140px);">
            <svg viewBox="0 0 1600 900">
              <polygon points="800,250 540,450 1060,450" fill="var(--green)"/>
              <polygon points="800,410 610,560 990,560" fill="var(--green)"/>
              <polygon points="800,555 680,650 920,650" fill="var(--green2)"/>
              <polygon points="800,450 710,520 890,520" fill="#070f1f" opacity="0.98"/>
            </svg>
          </div>

          <div class="face shade4" style="transform: translate(-50%,-52%) rotateY(270deg) translateZ(140px);">
            <svg viewBox="0 0 1600 900">
              <polygon points="800,250 540,450 1060,450" fill="var(--green)"/>
              <polygon points="800,410 610,560 990,560" fill="var(--green)"/>
              <polygon points="800,555 680,650 920,650" fill="var(--green2)"/>
              <polygon points="800,450 710,520 890,520" fill="#070f1f" opacity="0.98"/>
            </svg>
          </div>

          <!-- æ ‘å¹²ï¼šæ”¾åœ¨æ—‹è½¬ç»„é‡Œ -->
          <div class="trunkWrap">
            <div class="trunkFace"></div>
            <div class="trunkFace back"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="caption">ğŸ„ æ—‹è½¬åœ£è¯æ ‘ + é£˜é›ª + æ—¶é’Ÿ</div>

  <script>
    // ===== æ—¶é’Ÿ =====
    function pad(n){ return String(n).padStart(2,'0'); }
    function tickClock(){
      const now = new Date();
      const hh = pad(now.getHours());
      const mm = pad(now.getMinutes());
      const ss = pad(now.getSeconds());
      document.getElementById('clock').textContent = `${hh}:${mm}:${ss}`;

      const y = now.getFullYear();
      const m = pad(now.getMonth()+1);
      const d = pad(now.getDate());
      const wk = ["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"][now.getDay()];
      document.getElementById('date').textContent = `${y}-${m}-${d}  å‘¨${wk}`;
    }
    tickClock();
    setInterval(tickClock, 250);

    // ===== é›ªèŠ±ï¼ˆä¸Šå¯†ä¸‹ç¨€ï¼Œæ›´åƒä½ ç»™çš„å›¾ï¼‰=====
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");

    function resize(){
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(innerWidth * dpr);
      canvas.height = Math.floor(innerHeight * dpr);
      canvas.style.width = innerWidth + "px";
      canvas.style.height = innerHeight + "px";
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    addEventListener("resize", resize);
    resize();

    const rand=(a,b)=>Math.random()*(b-a)+a;
    const flakes=[];
    const COUNT = Math.min(140, Math.floor((innerWidth*innerHeight)/16000)+60);

    function spawn(initial=false){
      const bias = Math.pow(Math.random(), 2.2); // è¶Šé ä¸Šè¶Šå¤š
      const y = initial ? (bias * innerHeight * 0.78) : rand(-90,-10);
      return {
        x: rand(0, innerWidth),
        y,
        r: rand(1.1, 3.3),
        vy: rand(0.35, 1.15),
        vx: rand(-0.15, 0.15),
        sway: rand(0.002, 0.010),
        phase: rand(0, Math.PI*2),
        a: rand(0.45, 0.92),
        fancy: Math.random()<0.30
      };
    }
    for(let i=0;i<COUNT;i++) flakes.push(spawn(true));

    function drawFancy(x,y,r,a){
      ctx.save();
      ctx.globalAlpha = a;
      ctx.translate(x,y);
      ctx.lineWidth = Math.max(1, r*0.42);
      ctx.strokeStyle = "rgba(255,255,255,0.95)";
      for(let k=0;k<6;k++){
        ctx.rotate(Math.PI/3);
        ctx.beginPath(); ctx.moveTo(0,0); ctx.lineTo(0,-r*2.1); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,-r*1.25); ctx.lineTo(r*0.65,-r*1.6); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,-r*1.25); ctx.lineTo(-r*0.65,-r*1.6); ctx.stroke();
      }
      ctx.restore();
    }
    function drawDot(x,y,r,a){
      ctx.save();
      ctx.globalAlpha = a;
      ctx.fillStyle = "rgba(255,255,255,0.92)";
      ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
      ctx.restore();
    }

    function loop(){
      ctx.clearRect(0,0,innerWidth,innerHeight);
      for(const f of flakes){
        f.phase += f.sway*60;
        f.x += f.vx + Math.sin(f.phase)*0.25;
        f.y += f.vy;

        // ä¸‹æ–¹ç¨€ç–ï¼šåˆ°ä¸‹åŠéƒ¨æœ‰æ¦‚ç‡â€œæ¶ˆå¤±é‡ç”Ÿâ€
        if (f.y > innerHeight*0.70 && Math.random()<0.015){
          Object.assign(f, spawn(false));
          continue;
        }
        if (f.y > innerHeight + 12) Object.assign(f, spawn(false));
        if (f.x < -20) f.x = innerWidth + 20;
        if (f.x > innerWidth + 20) f.x = -20;

        if (f.fancy) drawFancy(f.x,f.y,f.r,f.a);
        else drawDot(f.x,f.y,f.r,f.a);
      }
      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
